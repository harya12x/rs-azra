<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PENOLAKAN RUJUKAN</title>
  </head>
  <style>
    * {
      margin: 0;
      padding: 0;
      font-family: Arial, Helvetica, sans-serif;
    }
    .title {
      text-align: center;
      font-family: Arial, Helvetica, sans-serif;
      margin-bottom: 10px;
    }
    .table-bordered tr:nth-child(odd) {
      background-color: #dfe8f6;
    }

    .table {
      border-collapse: collapse;
      width: 100%;
    }

    .table td,
    .table th {
      border: 1px solid black;
      padding: 5px;
    }
  </style>
  <script type="text/javascript">
    $(document).on("ajaxStop", function () {
      SetTTD();
    });
  </script>
  <script>
    $(document).ready(function () {
      $(function () {
        $(".datepicker").datepicker({
          dateFormat: "dd-mm-yy",
          autoclose: true,
          todayHighlight: true,
        });
      });
    });

    // Untuk Keperluan TTD
    function ttd_paraf(id) {
      PopupCenter(
        "index.php?mod=ttd_pentablet&cmd=ttd_pentablet&jenis=" + id,
        "pop",
        800,
        400
      );
    }

    // Untuk Keperluan TTD
    function tampil_ttd(x, y) {
      ImageToText(x, y);
    }

    // Untuk Keperluan TTD
    function PopupCenter(url, title, w, h) {
      console.log("PopupCenter");
      var dualScreenLeft =
        window.screenLeft != undefined ? window.screenLeft : screen.left;
      var dualScreenTop =
        window.screenTop != undefined ? window.screenTop : screen.top;
      var width = window.innerWidth
        ? window.innerWidth
        : document.documentElement.clientWidth
        ? document.documentElement.clientWidth
        : screen.width;
      var height = window.innerHeight
        ? window.innerHeight
        : document.documentElement.clientHeight
        ? document.documentElement.clientHeight
        : screen.height;
      var left = width / 2 - w / 2 + dualScreenLeft + 100;
      var top = height / 2 - h / 2 + dualScreenTop + 100;

      var newWindow = window.open(
        url,
        title,
        "scrollbars=yes, width=" +
          w +
          ", height=" +
          h +
          ", top=" +
          top +
          ", left=" +
          left
      );

      if (window.focus) newWindow.focus();
    }

    // Untuk Keperluan TTD
    function SetTTD() {
      $('input[data-name="paraf"]').each(function () {
        var id = $(this).attr("data-id"),
          ttd = $(this).val();

        ImageToText(id, ttd);
      });
    }

    // Untuk Keperluan Select Option & TTD
    $(document)
      .off("change", 'select[data-var="set_name_sel"]')
      .on("change", 'select[data-var="set_name_sel"]', function () {
        var name = $(this).attr("name"),
          name_txt = $(this).find("option:selected").text(),
          name_img = $(this).find("option:selected").attr("data-ttd"),
          id = $(this).attr("data-id");

        $("#" + name + "_txt").val(name_txt);

        ImageToText(id, name_img);
      });

    // Untuk Keperluan Create TTD
    $(document)
      .off("click", "#CreateTTD")
      .on("click", "#CreateTTD", function () {
        var id = $(this).attr("data-id");

        ttd_paraf(id);
      });

    // Untuk Keperluan Parsing TTD To Object
    function ImageToText(img_id, img_val) {
      def = "paraf";

      if (typeof img_val === "undefined" || img_val == "") {
        $("#def_img_" + img_id).text(def);
        $("#def_img_" + img_id).css({
          display: "",
          "font-style": "italic",
          width: "100px",
          height: "100px",
        });
        $("#image_paraf_" + img_id).css("display", "none");
      } else {
        $("#def_img_" + img_id).text("");
        $("#def_img_" + img_id).css("display", "none");
        $("#image_paraf_" + img_id).attr("src", "" + img_val + "");
        $("#image_paraf_" + img_id).css({
          display: "",
          width: "100px",
          height: "100px",
        });
        $("#paraf_" + img_id).val(img_val);
      }
    }
  </script>
  <body>
    <h1 class="title">PENOLAKAN RUJUKAN</h1>
    <table class="table table-bordered" width="100%">
      <tbody>
        <tr>
          <td colspan="2">Saya yang bertandatangan di bawah ini :</td>
        </tr>
        <tr>
          <td width="15%">Nama :</td>
          <td width="85%">
            <input
              style="width: 100%"
              type="text"
              name="nama-yg-ttd"
              id="nama-yg-ttd"
              label="nama-yg-ttd"
              myid="check_cara"
              placeholder="......"
            />
          </td>
        </tr>
        <tr>
          <td>Umur :</td>
          <td width="95%">
            <input
              style="width: 100%"
              type="text"
              name="umur-yg-ttd"
              id="umur-yg-ttd"
              label="umur-yg-ttd"
              myid="check_cara"
              placeholder="......"
            />
          </td>
        </tr>
        <tr>
          <td>Alamat :</td>
          <td width="95%">
            <input
              style="width: 100%"
              type="text"
              name="alamat-yg-ttd"
              id="alamat-yg-ttd"
              label="alamat-yg-ttd"
              myid="check_cara"
              placeholder="......"
            />
          </td>
        </tr>
        <tr>
          <td>No. KTP :</td>
          <td width="95%">
            <input
              style="width: 100%"
              type="text"
              name="no-ktp-yg-ttd"
              id="no-ktp-yg-ttd"
              label="no-ktp-yg-ttd"
              myid="check_cara"
              placeholder="......"
            />
          </td>
        </tr>
      </tbody>
    </table>

    <br />
    <p>Dengan ini menyatakan</p>
    <br />

    <table class="table table-bordered" width="100%">
      <tbody>
        <tr>
          <th colspan="2"><h3>PENOLAKAN</h3></th>
        </tr>
        <tr>
          <td colspan="2">untuk dilakukan rujukan</td>
        </tr>
        <tr>
          <td colspan="2">
            <div style="display: flex; gap: 5px">
              <label for="">Terhadap diri saya sendiri</label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="sendiri"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / istri </label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="istri"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / suami </label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="suami"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / anak </label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="anak"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / ayah </label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="ayah"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / ibu </label>
              <input
                type="radio"
                name="yg-bersangkutan"
                id="yg-bersangkutan"
                label="yg-bersangkutan"
                value="ibu"
                myid="check_cara"
              />
              <label for=""><sup>*</sup> / lainnya <sup>*</sup> </label>
              <input
                style="flex: 1"
                type="text"
                name="yg-bersangkutan-lainnya"
                id="yg-bersangkutan-lainnya"
                label="yg-bersangkutan-lainnya"
                placeholder="......"
                myid="check_cara"
              />
            </div>
          </td>
        </tr>
        <tr>
          <td>Nama :</td>
          <td width="90%">
            <input
              style="width: 100%"
              type="text"
              name="nama-yg-bersangkutan"
              id="nama-yg-bersangkutan"
              label="nama-yg-bersangkutan"
              placeholder="......"
              value="{VNAMA_PASIEN}"
              myid="check_cara"
            />
          </td>
        </tr>
        <tr>
          <td>Umur :</td>
          <td width="90%">
            <input
              style="width: 100%"
              type="text"
              name="umur-yg-bersangkutan"
              id="umur-yg-bersangkutan"
              label="umur-yg-bersangkutan"
              placeholder="......"
              value="{VAGE}"
              myid="check_cara"
            />
          </td>
        </tr>
        <tr>
          <td>Jenis kelamin :</td>
          <td width="90%">
            <input
              style="width: 100%"
              type="text"
              name="jk-yg-bersangkutan"
              id="jk-yg-bersangkutan"
              label="jk-yg-bersangkutan"
              placeholder="......"
              value="{VSEX}"
              myid="check_cara"
            />
          </td>
        </tr>
        <tr>
          <td>No. RM :</td>
          <td width="90%">
            <input
              style="width: 100%"
              type="text"
              name="no-rm-yg-bersangkutan"
              id="no-rm-yg-bersangkutan"
              label="no-rm-yg-bersangkutan"
              placeholder="......"
              value="{NO_RM}"
              myid="check_cara"
            />
          </td>
        </tr>
        <tr>
          <td>Ruang / kelas :</td>
          <td width="90%">
            <input
              style="width: 100%"
              type="text"
              name="ruang-kelas-yg-bersangkutan"
              id="ruang-kelas-yg-bersangkutan"
              label="ruang-kelas-yg-bersangkutan"
              placeholder="......"
              value="{VNAMARUANGAN} / {VNAMAKELAS}"
              myid="check_cara"
            />
          </td>
        </tr>
      </tbody>
    </table>

    <br />
    <br />

    <p>
      Saya memahami perlunya dan manfaat tindakan rujukan tersebut sebagaimana
      telah dijelaskan seperti di atas kepada atas, termasuk risiko dan
      komplikasi yang mungkin timbul. Saya bertanggung jawab secara penuh atas
      segala akibat yang mungkin timbul sebagai akibat tidak dilakukannya
      tindakan rujukan tersebut.
    </p>

    <br />
    <br />
    <table class="table" width="100%">
      <tbody>
        <tr>
          <td colspan="3">
            <div>
              <label for="">Bogor,</label>
              <input
                size="30"
                type="text"
                name="tgl-pernyataan"
                id="tgl-pernyataan"
                label="tgl-pernyataan"
                myid="check_cara"
                placeholder="dd-mm-yy"
                class="datepicker hasDatePicker"
              />
              <label for="">pukul,</label>
              <input
                size="30"
                type="text"
                name="pukul-pernyataan"
                id="pukul-pernyataan"
                label="pukul-pernyataan"
                myid="check_cara"
                mtype="pukul"
                placeholder="00.00"
              />
            </div>
          </td>
        </tr>
        <tr>
          <td width="33%" style="text-align: center">
            <br />
            <label for="">Saksi Rumah Sakit</label>
            <br />
            <label
              class="label text-center"
              id="def_img_ex_ttd_saksi_rumah_sakit"
              style="font-style: italic; width: 100px; height: 100px"
              >paraf</label
            >
            <label class="label text-center">
              <img
                class="text-center"
                id="image_paraf_ex_ttd_saksi_rumah_sakit"
                src=""
                style="display: none"
            /></label>
            <input
              myid="check_cara"
              type="hidden"
              name="paraf_ex_ttd_saksi_rumah_sakit"
              id="paraf_ex_ttd_saksi_rumah_sakit"
              data-name="paraf"
              data-id="ex_ttd_saksi_rumah_sakit"
            />
            <br />
            <label class="label text-center">
              <a
                id="CreateTTD"
                class="btn btn-default btn-xs pointer text-center"
                data-id="ex_ttd_saksi_rumah_sakit"
                style="text-align: center"
              >
                <i class="fa fa-edit"> </i>
                PENTABLET
              </a>
            </label>
            <br />
            (<input
              style="text-align: center"
              size="40"
              type="text"
              name="saksi-rumah-sakit"
              id="saksi-rumah-sakit"
              label="saksi-rumah-sakit"
              myid="check_cara"
              placeholder="....."
            />)
            <br />
            <font id="ttdnya2"></font>
          </td>
          <td width="33%" style="text-align: center">
            <br />
            <label for="">Saksi Keluarga</label>
            <br />
            <label
              class="label text-center"
              id="def_img_ex_ttd_saksi_keluarga"
              style="font-style: italic; width: 100px; height: 100px"
              >paraf</label
            >
            <label class="label text-center">
              <img
                class="text-center"
                id="image_paraf_ex_ttd_saksi_keluarga"
                src=""
                style="display: none"
            /></label>
            <input
              myid="check_cara"
              type="hidden"
              name="paraf_ex_ttd_saksi_keluarga"
              id="paraf_ex_ttd_saksi_keluarga"
              data-name="paraf"
              data-id="ex_ttd_saksi_keluarga"
            />
            <br />
            <label class="label text-center">
              <a
                id="CreateTTD"
                class="btn btn-default btn-xs pointer text-center"
                data-id="ex_ttd_saksi_keluarga"
                style="text-align: center"
              >
                <i class="fa fa-edit"> </i>
                PENTABLET
              </a>
            </label>
            <br />
            (
            <input
              style="text-align: center"
              size="40"
              type="text"
              name="dokter-yg-merawat"
              id="dokter-yg-merawat"
              label="dokter-yg-merawat"
              myid="check_cara"
              placeholder="....."
            />
            )
            <br />
            <font id="ttdnya2"></font>
          </td>
          <td width="33%" style="text-align: center">
            <br />
            <p>Pasien/Keluarga</p>
            <label
              class="label text-center"
              id="def_img_ex_ttd_pasien_keluarga"
              style="font-style: italic; width: 100px; height: 100px"
              >paraf</label
            >
            <label class="label text-center">
              <img
                class="text-center"
                id="image_paraf_ex_ttd_pasien_keluarga"
                src=""
                style="display: none"
            /></label>
            <input
              myid="check_cara"
              type="hidden"
              name="paraf_ex_ttd_pasien_keluarga"
              id="paraf_ex_ttd_pasien_keluarga"
              data-name="paraf"
              data-id="ex_ttd_pasien_keluarga"
            />
            <br />
            <label class="label text-center">
              <a
                id="CreateTTD"
                class="btn btn-default btn-xs pointer text-center"
                data-id="ex_ttd_pasien_keluarga"
                style="text-align: center"
              >
                <i class="fa fa-edit"> </i>
                PENTABLET
              </a>
            </label>
            <br />
            (
            <input
              style="text-align: center"
              size="40"
              type="text"
              name="pasien-keluarga"
              id="pasien-keluarga"
              label="pasien-keluarga"
              myid="check_cara"
              placeholder="....."
            />)
            <br />
            <font id="ttdnya2"></font>
          </td>
        </tr>
      </tbody>
    </table>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var radioButtons = document.querySelectorAll('input[type="radio"]');
        radioButtons.forEach(function (radio) {
          radio.addEventListener("click", function () {
            if (this.classList.contains("clicked")) {
              this.checked = false;
              this.classList.remove("clicked");
            } else {
              var name = this.getAttribute("name");
              var radios = document.querySelectorAll(
                'input[type="radio"][name="' + name + '"]'
              );
              radios.forEach(function (r) {
                r.classList.remove("clicked");
              });
              this.classList.add("clicked");
            }
            console.log(this.name + " diubah menjadi: " + this.checked);
          });
        });

        var textInputs = document.querySelectorAll('input[type="text"]');
        textInputs.forEach(function (input) {
          input.addEventListener("change", function () {
            console.log(this.name + " diubah menjadi: " + this.value);
          });
        });
      });
    </script>
  </body>
</html>
